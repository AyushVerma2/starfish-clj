<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>starfish.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Starfish-clj</span> <span class="project-version">0.5.2-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="starfish.core.html"><div class="inner"><span>starfish.core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="starfish.core.html#var-*ocean*"><div class="inner"><span>*ocean*</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-agent.3F"><div class="inner"><span>agent?</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-asset"><div class="inner"><span>asset</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-asset-id"><div class="inner"><span>asset-id</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-asset.3F"><div class="inner"><span>asset?</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-BYTE-ARRAY-CLASS"><div class="inner"><span>BYTE-ARRAY-CLASS</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-bytes-.3Ehex"><div class="inner"><span>bytes-&gt;hex</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-content"><div class="inner"><span>content</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-create-ddo"><div class="inner"><span>create-ddo</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-create-operation"><div class="inner"><span>create-operation</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-did"><div class="inner"><span>did</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-did-fragment"><div class="inner"><span>did-fragment</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-did-id"><div class="inner"><span>did-id</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-did-method"><div class="inner"><span>did-method</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-did-path"><div class="inner"><span>did-path</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-did-scheme"><div class="inner"><span>did-scheme</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-did.3F"><div class="inner"><span>did?</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-digest"><div class="inner"><span>digest</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-format-params"><div class="inner"><span>format-params</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-get-agent"><div class="inner"><span>get-agent</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-get-asset"><div class="inner"><span>get-asset</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-hex-.3Ebytes"><div class="inner"><span>hex-&gt;bytes</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-hex-.3Eint"><div class="inner"><span>hex-&gt;int</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-int-.3Ehex"><div class="inner"><span>int-&gt;hex</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-invoke"><div class="inner"><span>invoke</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-invoke-prov-metadata"><div class="inner"><span>invoke-prov-metadata</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-invoke-result"><div class="inner"><span>invoke-result</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-invoke-sync"><div class="inner"><span>invoke-sync</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-json-string"><div class="inner"><span>json-string</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-json-string-pprint"><div class="inner"><span>json-string-pprint</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-memory-asset"><div class="inner"><span>memory-asset</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-metadata"><div class="inner"><span>metadata</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-publish-prov-metadata"><div class="inner"><span>publish-prov-metadata</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-random-did"><div class="inner"><span>random-did</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-random-did-string"><div class="inner"><span>random-did-string</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-random-hex-string"><div class="inner"><span>random-hex-string</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-read-json-string"><div class="inner"><span>read-json-string</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-register"><div class="inner"><span>register</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-remote-account"><div class="inner"><span>remote-account</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-remote-agent"><div class="inner"><span>remote-agent</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-to-bytes"><div class="inner"><span>to-bytes</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-to-string"><div class="inner"><span>to-string</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-upload"><div class="inner"><span>upload</span></div></a></li><li class="depth-1"><a href="starfish.core.html#var-valid-did.3F"><div class="inner"><span>valid-did?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">starfish.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-*ocean*"><h3>*ocean*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-agent.3F"><h3>agent?</h3><div class="usage"><code>(agent? a)</code></div><div class="doc"><pre class="plaintext">Returns true if the argument is an Agent
</pre></div></div><div class="public anchor" id="var-asset"><h3>asset</h3><div class="usage"><code>(asset data)</code></div><div class="doc"><pre class="plaintext">Coerces input data to an asset.
- Existing assets are unchanged
- DID are resolved to appropriate assets if possible
- Strings and numbers are converted to memory assets containing the string representation
- Map data structures are converted to JSON strings</pre></div></div><div class="public anchor" id="var-asset-id"><h3>asset-id</h3><div class="usage"><code>(asset-id a)</code></div><div class="doc"><pre class="plaintext">Gets the Asset ID for an asset.

The asset ID is meaningful mainly  in the context of an agent that has the asset registered. It is
preferable to use (did asset) for the asset DID if the intent is to obtain a full reference to the asset
that includes the agent location.</pre></div></div><div class="public anchor" id="var-asset.3F"><h3>asset?</h3><div class="usage"><code>(asset? a)</code></div><div class="doc"><pre class="plaintext">Returns true if the argument is an Asset
</pre></div></div><div class="public anchor" id="var-BYTE-ARRAY-CLASS"><h3>BYTE-ARRAY-CLASS</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-bytes-.3Ehex"><h3>bytes-&gt;hex</h3><div class="usage"><code>(bytes-&gt;hex b)</code></div><div class="doc"><pre class="plaintext">Convert bytes to hex string
</pre></div></div><div class="public anchor" id="var-content"><h3>content</h3><div class="usage"><code>(content asset)</code></div><div class="doc"><pre class="plaintext">Gets the content for a given asset as raw byte data
</pre></div></div><div class="public anchor" id="var-create-ddo"><h3>create-ddo</h3><div class="usage"><code>(create-ddo host)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-create-operation"><h3>create-operation</h3><div class="usage"><code>(create-operation params f)</code><code>(create-operation params f additional-metadata)</code></div><div class="doc"><pre class="plaintext">Create an in-memory operation with the given parameter list and function.
</pre></div></div><div class="public anchor" id="var-did"><h3>did</h3><div class="usage"><code>(did a)</code></div><div class="doc"><pre class="plaintext">Gets the DID for the given input
- DID is returned for Agents or Assets
- Strings are intrepreted as DIDs if possible</pre></div></div><div class="public anchor" id="var-did-fragment"><h3>did-fragment</h3><div class="usage"><code>(did-fragment a)</code></div><div class="doc"><pre class="plaintext">Return the DID fragment
</pre></div></div><div class="public anchor" id="var-did-id"><h3>did-id</h3><div class="usage"><code>(did-id a)</code></div><div class="doc"><pre class="plaintext">Return the DID ID
</pre></div></div><div class="public anchor" id="var-did-method"><h3>did-method</h3><div class="usage"><code>(did-method a)</code></div><div class="doc"><pre class="plaintext">Return the DID method
</pre></div></div><div class="public anchor" id="var-did-path"><h3>did-path</h3><div class="usage"><code>(did-path a)</code></div><div class="doc"><pre class="plaintext">Return the DID path
</pre></div></div><div class="public anchor" id="var-did-scheme"><h3>did-scheme</h3><div class="usage"><code>(did-scheme a)</code></div><div class="doc"><pre class="plaintext">Return the DID scheme
</pre></div></div><div class="public anchor" id="var-did.3F"><h3>did?</h3><div class="usage"><code>(did? a)</code></div><div class="doc"><pre class="plaintext">Returns true if the argument is a W3C DID
</pre></div></div><div class="public anchor" id="var-digest"><h3>digest</h3><div class="usage"><code>(digest data)</code></div><div class="doc"><pre class="plaintext">Computes the keccak256 hash of the byte representation of some data and returns this as a hex string.

Handles
 - byte arrays - hashed as-is
 - Strings - converted to UTF-8 representation
 - Assets - gets content hash
</pre></div></div><div class="public anchor" id="var-format-params"><h3>format-params</h3><div class="usage"><code>(format-params operation params)</code></div><div class="doc"><pre class="plaintext">Format parameters into a parameter map of string-&gt;asset according to the requirements of the operation.
</pre></div></div><div class="public anchor" id="var-get-agent"><h3>get-agent</h3><div class="usage"><code>(get-agent agent-did)</code></div><div class="doc"><pre class="plaintext">Gets a Ocean agent for the given DID
</pre></div></div><div class="public anchor" id="var-get-asset"><h3>get-asset</h3><div class="usage"><code>(get-asset agent asset-id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-hex-.3Ebytes"><h3>hex-&gt;bytes</h3><div class="usage"><code>(hex-&gt;bytes h)</code></div><div class="doc"><pre class="plaintext">Convert hex string to bytes
</pre></div></div><div class="public anchor" id="var-hex-.3Eint"><h3>hex-&gt;int</h3><div class="usage"><code>(hex-&gt;int h)</code></div><div class="doc"><pre class="plaintext">Convert hex string to int
</pre></div></div><div class="public anchor" id="var-int-.3Ehex"><h3>int-&gt;hex</h3><div class="usage"><code>(int-&gt;hex i)</code></div><div class="doc"><pre class="plaintext">Convert int to hex string
</pre></div></div><div class="public anchor" id="var-invoke"><h3>invoke</h3><div class="usage"><code>(invoke operation params)</code></div><div class="doc"><pre class="plaintext">Invoke an operation with the given parameters. Parameters may be either a positional list
or a map of name / value pairs</pre></div></div><div class="public anchor" id="var-invoke-prov-metadata"><h3>invoke-prov-metadata</h3><div class="usage"><code>(invoke-prov-metadata activityId agentId asset-dependencies params result-param-name)</code><code>(invoke-prov-metadata metadata activityId agentId asset-dependencies params result-param-name)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-invoke-result"><h3>invoke-result</h3><div class="usage"><code>(invoke-result operation params)</code></div><div class="doc"><pre class="plaintext">Invokes an operation and wait 10 seconds for the result
</pre></div></div><div class="public anchor" id="var-invoke-sync"><h3>invoke-sync</h3><div class="usage"><code>(invoke-sync operation params)</code></div><div class="doc"><pre class="plaintext">Invokes an operation synchronously
</pre></div></div><div class="public anchor" id="var-json-string"><h3>json-string</h3><div class="usage"><code>(json-string json)</code><code>(json-string json pprint?)</code></div><div class="doc"><pre class="plaintext">Coerces the argument to a JSON string
</pre></div></div><div class="public anchor" id="var-json-string-pprint"><h3>json-string-pprint</h3><div class="usage"><code>(json-string-pprint json)</code></div><div class="doc"><pre class="plaintext">Coerces the argument to a pretty-printed JSON string
</pre></div></div><div class="public anchor" id="var-memory-asset"><h3>memory-asset</h3><div class="usage"><code>(memory-asset data)</code><code>(memory-asset meta data)</code></div><div class="doc"><pre class="plaintext">Create an in-memory asset with the given metadata and raw data.

If no metadata is supplied, default metadata is generated.</pre></div></div><div class="public anchor" id="var-metadata"><h3>metadata</h3><div class="usage"><code>(metadata asset)</code></div><div class="doc"><pre class="plaintext">Gets the metadata for an asset as a Clojure map
</pre></div></div><div class="public anchor" id="var-publish-prov-metadata"><h3>publish-prov-metadata</h3><div class="usage"><code>(publish-prov-metadata activityId agentId)</code><code>(publish-prov-metadata metadata activityId agentId)</code></div><div class="doc"><pre class="plaintext">Creates provenance metadata. If the first argument is a map with raw metadata, it adds a provenance
section</pre></div></div><div class="public anchor" id="var-random-did"><h3>random-did</h3><div class="usage"><code>(random-did)</code></div><div class="doc"><pre class="plaintext">Creates a random Ocean-compliant DID of the format:
did:ocn:a1019172af9ae4d6cb32b52193cae1e3d61c0bcf36f0ba1cd30bf82d6e446563</pre></div></div><div class="public anchor" id="var-random-did-string"><h3>random-did-string</h3><div class="usage"><code>(random-did-string)</code></div><div class="doc"><pre class="plaintext">Creates a random Ocean-compliant DID as a string, of the format:
did:ocn:a1019172af9ae4d6cb32b52193cae1e3d61c0bcf36f0ba1cd30bf82d6e446563</pre></div></div><div class="public anchor" id="var-random-hex-string"><h3>random-hex-string</h3><div class="usage"><code>(random-hex-string len)</code></div><div class="doc"><pre class="plaintext">Creates a random hex string of the specified length in bytes
</pre></div></div><div class="public anchor" id="var-read-json-string"><h3>read-json-string</h3><div class="usage"><code>(read-json-string json-str)</code></div><div class="doc"><pre class="plaintext">Parses JSON string to a Clojure Map
</pre></div></div><div class="public anchor" id="var-register"><h3>register</h3><div class="usage"><code>(register agent asset)</code></div><div class="doc"><pre class="plaintext">Registers an asset with an agent
</pre></div></div><div class="public anchor" id="var-remote-account"><h3>remote-account</h3><div class="usage"><code>(remote-account username password)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-remote-agent"><h3>remote-agent</h3><div class="usage"><code>(remote-agent did ddo username password)</code></div><div class="doc"><pre class="plaintext">Gets a remote agent with the provided DID
</pre></div></div><div class="public anchor" id="var-to-bytes"><h3>to-bytes</h3><div class="usage"><code>(to-bytes data)</code></div><div class="doc"><pre class="plaintext">Coerces the data to a byte array.
- byte arrays are returned unchanged
- Strings converted to UTF-8 byte representation
- Assets have their raw byte content returned</pre></div></div><div class="public anchor" id="var-to-string"><h3>to-string</h3><div class="usage"><code>(to-string data)</code></div><div class="doc"><pre class="plaintext">Coerces data to a string format.
</pre></div></div><div class="public anchor" id="var-upload"><h3>upload</h3><div class="usage"><code>(upload agent asset)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-valid-did.3F"><h3>valid-did?</h3><div class="usage"><code>(valid-did? a)</code></div><div class="doc"><pre class="plaintext">Is this a valid DID?
</pre></div></div></div></body></html>